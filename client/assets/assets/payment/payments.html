<!DOCTYPE html>
<html>
  <meta name="viewport" content="width=device-width">
  <head><title>RazorPay Web Payment</title></head>
  <body>
    ....Loading....
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
    
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
   
    const customername = urlParams.get('customername');
    const customeremail = urlParams.get('customeremail');
    const customercontact = urlParams.get('customercontact');

    const orderid = urlParams.get('orderid');
    const name = urlParams.get('name');
    const price = urlParams.get('price');
    const image = urlParams.get('image');
  
      options = {
         "key": "rzp_test_9wENcpYclSh3VT",
         "order_id":orderid,
          "amount": price,
          "currency": "INR",
          "name":name,
          "image":image,
          "handler": function (response){
             var data={
               event_id:"SUCCESS",
               event_details:response
             };
             print("success 34")
             window.parent.postMessage(data,"*");   
          },    
          "prefill": {        
             "name": customername,        
             "email":customeremail,
             "contact":customercontact  
           },   
           "notes": {        
             "address": "Autofy"    
          },
          "config": {
        "display": {
          "hide": [
            {"method": 'emi'},
            {"method": 'paylater'}
          ],
          "blocks": {
            "banks": {
              "name": "Quick Payment",
              "instruments": [
                {
                  "method": 'wallet',
                  "wallets": ['paypal']
                },
                {
                  "method": 'upi',
                  "flows": ["intent"],
                  "apps": ["google_pay"],
                },
                {
                  "method": 'upi',
                  "apps": ["bhim"]
                },
                {
                  "method": 'wallet',
                  "wallets": ['phonepe']
                },
                {
                  "method": 'wallet',
                  "wallets": ['paytm']
                },
                {
                  "method": 'upi',
                  "flows": ["qr"]
                },
                {
                  "method": 'app',
                  "providers": ["cred"]
                },
              ],
            }
          },
          "sequence": [
            'block.pop',
            'block.banks',
            "card",
            "netbanking",
            "upi",
            "wallet"
          ],
          "preferences": {
            "show_default_blocks":
                false // Should Checkout show its default blocks?
          }
        }
      },
          "modal": {
            "ondismiss": function(){
               var data={
               event_id:"MODAL_CLOSED"
             };
               window.parent.postMessage(data,"*");   //3
            }
          }
       };
       var rzp1 = new Razorpay(options);
       rzp1.on('payment.failed', function (response){
         var data={
            event_id:"PAYMENT_FAILED",
            event_details:response
         };
         window.parent.postMessage(data,"*");   //3
      });
      rzp1.on('payment.error', function (response){
         var data={
            event_id:"PAYMENT_FAILED",
            event_details:response
         };
         window.parent.postMessage(data,"*");   //3
      });
       window.onload = function(e){  //1  
         
            rzp1.open();
         
          
         
          e.preventDefault();
       }

     </script>
  </body>
</html>